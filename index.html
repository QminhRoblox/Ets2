<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ETS2 Mods - Chia Sẻ Tài Nguyên Euro Truck Simulator 2</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="https://img.icons8.com/color/96/000000/truck.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --bg-tertiary: #21262d;
            --text-primary: #e6e6e6;
            --text-secondary: #8b949e;
            --text-tertiary: #c9d1d9;
            --accent-primary: #58a6ff;
            --accent-secondary: #1f6feb;
            --success: #2ea043;
            --warning: #f78166;
            --error: #f85149;
            --border: #30363d;
            --shadow: rgba(0, 0, 0, 0.5);
        }
        
        .theme-light {
            --bg-primary: #ffffff;
            --bg-secondary: #f6f8fa;
            --bg-tertiary: #eaeef2;
            --text-primary: #1f2328;
            --text-secondary: #656d76;
            --text-tertiary: #424a53;
            --accent-primary: #1f6feb;
            --accent-secondary: #0d419d;
            --border: #d0d7de;
            --shadow: rgba(0, 0, 0, 0.1);
        }
        
        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            transition: all 0.3s ease;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header */
        header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);
            padding: 15px 0;
            box-shadow: 0 4px 20px var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid var(--border);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-img {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            object-fit: cover;
            border: 2px solid var(--accent-primary);
        }
        
        .logo h1 {
            font-size: 1.8rem;
            background: linear-gradient(to right, var(--accent-primary), var(--text-secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 800;
            letter-spacing: 1px;
        }
        
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .theme-toggle {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            color: var(--text-primary);
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .theme-toggle:hover {
            transform: rotate(30deg);
            border-color: var(--accent-primary);
        }
        
        .theme-toggle i {
            font-size: 1.2rem;
        }
        
        .nav-links {
            display: flex;
            gap: 15px;
        }
        
        .nav-links a {
            color: var(--text-tertiary);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
            padding: 10px 16px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }
        
        .nav-links a:hover, .nav-links a.active {
            color: var(--accent-primary);
            background-color: rgba(88, 166, 255, 0.15);
            transform: translateY(-2px);
        }
        
        /* Image Slider */
        .slider {
            position: relative;
            height: 400px;
            overflow: hidden;
            border-radius: 0 0 25px 25px;
            margin-bottom: 50px;
        }
        
        .slider-container {
            display: flex;
            transition: transform 0.8s cubic-bezier(0.645, 0.045, 0.355, 1);
            height: 100%;
        }
        
        .slide {
            min-width: 100%;
            height: 100%;
            position: relative;
        }
        
        .slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(0.7);
        }
        
        .slide-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 30px;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));
            color: white;
        }
        
        .slide-content h2 {
            font-size: 2rem;
            margin-bottom: 10px;
            color: #58a6ff;
        }
        
        .slide-content p {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 600px;
        }
        
        .slider-controls {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }
        
        .slider-btn {
            background: rgba(88, 166, 255, 0.8);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.3s;
        }
        
        .slider-btn:hover {
            background: #58a6ff;
            transform: scale(1.1);
        }
        
        .slider-dots {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
        }
        
        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .dot.active {
            background: #58a6ff;
            transform: scale(1.2);
        }
        
        /* Add Mod Button */
        .add-mod-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #238636 0%, #2ea043 100%);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(46, 160, 67, 0.4);
            transition: all 0.3s;
            z-index: 100;
        }
        
        .add-mod-btn:hover {
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 8px 25px rgba(46, 160, 67, 0.6);
        }
        
        /* Main Content Layout */
        .main-content {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 30px;
        }
        
        /* Sidebar - Category Filter */
        .sidebar {
            background: var(--bg-secondary);
            border-radius: 15px;
            border: 1px solid var(--border);
            padding: 25px;
            height: fit-content;
            position: sticky;
            top: 100px;
        }
        
        .sidebar-title {
            font-size: 1.4rem;
            color: var(--accent-primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .category-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .category-item {
            padding: 14px 18px;
            background: linear-gradient(135deg, var(--bg-tertiary) 0%, var(--bg-secondary) 100%);
            border: 1px solid var(--border);
            color: var(--text-tertiary);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1rem;
        }
        
        .category-item:hover {
            transform: translateX(5px);
            border-color: var(--accent-primary);
            box-shadow: 0 5px 15px rgba(88, 166, 255, 0.2);
        }
        
        .category-item.active {
            background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
            color: white;
            border-color: transparent;
            box-shadow: 0 5px 15px rgba(88, 166, 255, 0.3);
        }
        
        /* Content Area */
        .content-area {
            flex: 1;
        }
        
        /* Search Box */
        .search-box {
            background: var(--bg-secondary);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid var(--border);
            margin-bottom: 30px;
            display: flex;
            gap: 15px;
        }
        
        .search-input {
            flex: 1;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            padding: 14px 20px;
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1rem;
            min-width: 0;
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.2);
        }
        
        .search-btn {
            background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
            color: white;
            border: none;
            padding: 14px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
            white-space: nowrap;
        }
        
        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(88, 166, 255, 0.3);
        }
        
        /* Quick Stats */
        .quick-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .stat-card {
            background: var(--bg-secondary);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid var(--border);
            text-align: center;
            transition: all 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-primary);
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-primary), #f78166);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 10px;
        }
        
        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        /* Mods Grid */
        .mods-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
            margin-bottom: 60px;
        }
        
        .mod-card {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 1px solid var(--border);
            position: relative;
        }
        
        .mod-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 40px var(--shadow);
            border-color: var(--accent-primary);
        }
        
        .mod-image {
            height: 200px;
            background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }
        
        .mod-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }
        
        .mod-card:hover .mod-image img {
            transform: scale(1.1);
        }
        
        .mod-category {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(88, 166, 255, 0.9);
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            backdrop-filter: blur(10px);
        }
        
        .mod-info {
            padding: 25px;
        }
        
        .mod-title {
            font-size: 1.3rem;
            margin-bottom: 12px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .mod-description {
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin-bottom: 15px;
            line-height: 1.6;
            height: 60px;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
        }
        
        .mod-meta {
            display: flex;
            justify-content: space-between;
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 15px;
            padding: 12px;
            background: var(--bg-tertiary);
            border-radius: 8px;
            border: 1px solid var(--border);
        }
        
        .mod-actions {
            display: flex;
            gap: 10px;
        }
        
        .mod-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 0.9rem;
        }
        
        .mod-btn.download {
            background: linear-gradient(135deg, #238636 0%, #2ea043 100%);
            color: white;
        }
        
        .mod-btn:hover {
            transform: translateY(-3px);
            opacity: 0.9;
        }
        
        /* Section Title */
        .section-title {
            font-size: 1.8rem;
            margin: 0 0 25px;
            color: var(--accent-primary);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .stats-badge {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-left: 10px;
        }
        
        /* Game Download Section */
        .game-download-section {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 40px 0;
            border: 1px solid var(--border);
        }
        
        .game-download-card {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            align-items: center;
        }
        
        .game-image {
            width: 100%;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .game-image img {
            width: 100%;
            height: auto;
            border-radius: 10px;
        }
        
        .game-info h3 {
            font-size: 1.8rem;
            color: var(--accent-primary);
            margin-bottom: 15px;
        }
        
        .game-download-buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }
        
        /* Footer */
        footer {
            background: var(--bg-primary);
            padding: 60px 0 30px;
            margin-top: 80px;
            border-top: 1px solid var(--border);
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }
        
        .copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid var(--border);
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #238636 0%, #2ea043 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            gap: 15px;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.4s;
            z-index: 3000;
            max-width: 350px;
        }
        
        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        .toast.error {
            background: linear-gradient(135deg, #da3633 0%, #f85149 100%);
        }
        
        /* Empty State */
        .empty-state {
            grid-column: 1 / -1;
            text-align: center;
            padding: 60px;
            background: var(--bg-secondary);
            border-radius: 15px;
            border: 2px dashed var(--border);
        }
        
        .empty-state i {
            font-size: 3rem;
            color: var(--accent-primary);
            margin-bottom: 20px;
        }
        
        .empty-state h3 {
            color: var(--text-tertiary);
            margin-bottom: 10px;
            font-size: 1.4rem;
        }
        
        .empty-state p {
            color: var(--text-secondary);
            margin-bottom: 30px;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(13, 17, 23, 0.95);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            overflow-y: auto;
            padding: 20px;
        }
        
        .modal-content {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);
            border-radius: 20px;
            padding: 30px;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid var(--border);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.7);
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .close-modal:hover {
            color: #f85149;
        }
        
        .modal-title {
            font-size: 1.8rem;
            color: var(--accent-primary);
            margin-bottom: 25px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-tertiary);
            font-weight: 600;
            font-size: 0.95rem;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.2);
        }
        
        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .modal-buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }
        
        .modal-btn {
            flex: 1;
            padding: 14px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .modal-btn.submit {
            background: linear-gradient(135deg, #238636 0%, #2ea043 100%);
            color: white;
        }
        
        .modal-btn.cancel {
            background: var(--bg-tertiary);
            color: var(--text-tertiary);
            border: 1px solid var(--border);
        }
        
        .modal-btn:hover {
            transform: translateY(-3px);
        }
        
        /* Download Modal */
        .download-content {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);
            border-radius: 20px;
            padding: 30px;
            max-width: 600px;
            width: 100%;
            border: 1px solid var(--border);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.7);
            position: relative;
        }
        
        .download-title {
            font-size: 1.6rem;
            color: var(--accent-primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .download-link-container {
            background: var(--bg-tertiary);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid var(--border);
            margin: 20px 0;
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .download-link {
            flex: 1;
            min-width: 200px;
            background: transparent;
            border: none;
            color: var(--accent-primary);
            font-size: 0.95rem;
            padding: 10px;
            font-family: monospace;
            overflow-x: auto;
            white-space: nowrap;
        }
        
        .copy-btn {
            background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }
        
        /* Settings Modal */
        .settings-option {
            background: var(--bg-tertiary);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border);
        }
        
        .settings-option h3 {
            color: var(--accent-primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
        }
        
        .setting-item:last-child {
            border-bottom: none;
        }
        
        .setting-info h4 {
            color: var(--text-primary);
            margin-bottom: 5px;
        }
        
        .setting-info p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 30px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: var(--accent-primary);
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(30px);
        }
        
        /* Responsive Design */
        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 220px 1fr;
                gap: 25px;
            }
            
            .mods-grid {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            }
        }
        
        @media (max-width: 992px) {
            .main-content {
                grid-template-columns: 200px 1fr;
                gap: 20px;
            }
            
            .sidebar {
                padding: 20px;
            }
            
            .mods-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
            
            .game-download-card {
                grid-template-columns: 1fr;
                gap: 20px;
            }
        }
        
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: static;
                margin-bottom: 30px;
            }
            
            .category-list {
                flex-direction: row;
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .category-item {
                flex: 1;
                min-width: 140px;
                justify-content: center;
                text-align: center;
            }
            
            .slider {
                height: 300px;
            }
            
            .slide-content {
                padding: 20px;
            }
            
            .slide-content h2 {
                font-size: 1.5rem;
            }
            
            .slide-content p {
                font-size: 1rem;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .search-box {
                flex-direction: column;
            }
            
            .nav-links {
                gap: 10px;
            }
            
            .nav-links a {
                padding: 8px 12px;
                font-size: 0.9rem;
            }
            
            .logo h1 {
                font-size: 1.5rem;
            }
            
            .logo-img {
                width: 50px;
                height: 50px;
            }
            
            .game-download-buttons {
                flex-direction: column;
            }
        }
        
        @media (max-width: 576px) {
            .container {
                padding: 0 15px;
            }
            
            .mods-grid {
                grid-template-columns: 1fr;
            }
            
            .quick-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .modal-buttons {
                flex-direction: column;
            }
            
            .modal-btn {
                width: 100%;
            }
            
            .download-link-container {
                flex-direction: column;
                align-items: stretch;
            }
            
            .download-link {
                min-width: 0;
                margin-bottom: 10px;
            }
            
            .copy-btn {
                width: 100%;
            }
            
            .mod-actions {
                flex-direction: column;
            }
            
            .modal-content,
            .download-content {
                padding: 20px;
            }
            
            .modal-title {
                font-size: 1.5rem;
            }
            
            .category-item {
                min-width: 120px;
                padding: 12px 15px;
                font-size: 0.9rem;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
        }
        
        @media (max-width: 480px) {
            .quick-stats {
                grid-template-columns: 1fr;
            }
            
            .nav-links a span {
                display: none;
            }
            
            .nav-links a i {
                font-size: 1.2rem;
            }
            
            .category-item {
                min-width: calc(50% - 10px);
            }
            
            .stats-badge {
                margin-left: 5px;
                padding: 3px 10px;
                font-size: 0.8rem;
            }
        }
        
        @media (max-width: 360px) {
            .category-item {
                min-width: 100%;
            }
            
            .logo h1 {
                font-size: 1.3rem;
            }
            
            .logo-img {
                width: 40px;
                height: 40px;
            }
            
            .slider {
                height: 250px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <nav>
                <div class="logo">
                    <img src="https://img.icons8.com/color/96/000000/truck.png" alt="ETS2 Logo" class="logo-img">
                    <h1>ETS2<span>Mods</span></h1>
                </div>
                <div class="header-right">
                    <button class="theme-toggle" onclick="toggleTheme()">
                        <i class="fas fa-moon"></i>
                    </button>
                    <div class="nav-links">
                        <a href="#" class="active"><i class="fas fa-home"></i> <span>Trang Chủ</span></a>
                        <a href="#" onclick="openAddModal()"><i class="fas fa-upload"></i> <span>Thêm Mod</span></a>
                        <a href="#" onclick="showSettingsModal()"><i class="fas fa-cog"></i> <span>Cài Đặt</span></a>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- Image Slider -->
    <section class="slider">
        <div class="slider-container" id="sliderContainer">
            <!-- Slides will be added by JavaScript -->
        </div>
        
        <div class="slider-controls">
            <button class="slider-btn" onclick="prevSlide()">
                <i class="fas fa-chevron-left"></i>
            </button>
            <button class="slider-btn" onclick="nextSlide()">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
        
        <div class="slider-dots" id="sliderDots">
            <!-- Dots will be added by JavaScript -->
        </div>
    </section>

    <!-- Main Content -->
    <main class="container">
        <div class="main-content">
            <!-- Sidebar - Category Filter -->
            <aside class="sidebar">
                <h2 class="sidebar-title"><i class="fas fa-filter"></i> Danh Mục</h2>
                <div class="category-list" id="categoryList">
                    <!-- Categories will be added by JavaScript -->
                </div>
            </aside>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Quick Stats -->
                <div class="quick-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="totalModsCount">0</div>
                        <div class="stat-label">Tổng số Mods</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalDownloadsCount">0</div>
                        <div class="stat-label">Lượt tải tổng</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="trucksCount">0</div>
                        <div class="stat-label">Mod Xe Tải</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="mapsCount">0</div>
                        <div class="stat-label">Mod Bản Đồ</div>
                    </div>
                </div>

                <!-- Search Box -->
                <div class="search-box">
                    <input type="text" class="search-input" id="searchInput" placeholder="Tìm kiếm mod theo tên, mô tả...">
                    <button class="search-btn" onclick="searchMods()">
                        <i class="fas fa-search"></i> Tìm Kiếm
                    </button>
                </div>

                <!-- Game Download Section -->
                <div class="game-download-section" id="gameDownloadSection">
                    <div class="game-download-card">
                        <div class="game-image">
                            <img src="https://images.unsplash.com/photo-1560958089-b8a1929cea89?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" alt="ETS2 Game">
                        </div>
                        <div class="game-info">
                            <h3><i class="fas fa-download"></i> TẢI GAME EURO TRUCK SIMULATOR 2</h3>
                            <p style="color: var(--text-secondary); margin-bottom: 15px;">
                                Tải phiên bản mới nhất của Euro Truck Simulator 2. Game lái xe tải mô phỏng thực tế với đồ họa đẹp và nhiều tính năng hấp dẫn.
                            </p>
                            <div class="game-download-buttons">
                                <button class="modal-btn submit" onclick="downloadGame()">
                                    <i class="fas fa-download"></i> Tải từ Steam
                                </button>
                                <button class="modal-btn" style="background: linear-gradient(135deg, #FF6B00, #FF8C00); color: white;" onclick="openGameDownloadModal()">
                                    <i class="fas fa-link"></i> Link Tải Khác
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mods Grid -->
                <h2 class="section-title">
                    <i class="fas fa-fire"></i> MODS NỔI BẬT
                    <span class="stats-badge" id="displayCount">0 mods</span>
                </h2>
                <div class="mods-grid" id="modsContainer">
                    <!-- Mod Cards will be generated by JavaScript -->
                </div>
            </div>
        </div>
    </main>

    <!-- Add Mod Button -->
    <button class="add-mod-btn" onclick="openAddModal()">
        <i class="fas fa-plus"></i>
    </button>

    <!-- Modals -->
    <div class="modal" id="addModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeAddModal()">&times;</button>
            <h2 class="modal-title"><i class="fas fa-upload"></i> THÊM MOD MỚI</h2>
            
            <form id="addModForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="modName"><i class="fas fa-heading"></i> Tên Mod *</label>
                        <input type="text" id="modName" required placeholder="VD: Scania R 2023">
                    </div>
                    
                    <div class="form-group">
                        <label for="modCategory"><i class="fas fa-tag"></i> Danh Mục *</label>
                        <select id="modCategory" required>
                            <option value="">Chọn danh mục</option>
                            <option value="trucks">Xe Tải</option>
                            <option value="trailers">Trailer</option>
                            <option value="maps">Bản Đồ</option>
                            <option value="graphics">Đồ Họa</option>
                            <option value="physics">Vật Lý</option>
                            <option value="sounds">Âm Thanh</option>
                            <option value="seasons">Mùa</option>
                            <option value="game_download">Tải Game</option>
                            <option value="others">Khác</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="modDescription"><i class="fas fa-align-left"></i> Mô Tả *</label>
                    <textarea id="modDescription" required placeholder="Mô tả chi tiết về mod..."></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="modImage"><i class="fas fa-image"></i> Link Ảnh Demo *</label>
                        <input type="url" id="modImage" required placeholder="https://images.com/mod-image.jpg">
                    </div>
                    
                    <div class="form-group">
                        <label for="modDownload"><i class="fas fa-download"></i> Link Tải *</label>
                        <input type="url" id="modDownload" required placeholder="https://drive.google.com/file/download">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="modSize"><i class="fas fa-hdd"></i> Kích Thước</label>
                        <input type="text" id="modSize" placeholder="45.2 MB">
                    </div>
                    
                    <div class="form-group">
                        <label for="modVersion"><i class="fas fa-code-branch"></i> Phiên Bản Game</label>
                        <input type="text" id="modVersion" placeholder="1.47">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="modAuthor"><i class="fas fa-user"></i> Tác Giả</label>
                        <input type="text" id="modAuthor" placeholder="Tên bạn hoặc nhóm phát triển">
                    </div>
                    
                    <div class="form-group">
                        <label for="modDownloads"><i class="fas fa-download"></i> Lượt Tải ban đầu</label>
                        <input type="number" id="modDownloads" value="0" min="0">
                    </div>
                </div>
                
                <div class="modal-buttons">
                    <button type="button" class="modal-btn cancel" onclick="closeAddModal()">
                        <i class="fas fa-times"></i> Hủy
                    </button>
                    <button type="submit" class="modal-btn submit">
                        <i class="fas fa-check"></i> Thêm Mod
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeSettingsModal()">&times;</button>
            <h2 class="modal-title"><i class="fas fa-cog"></i> CÀI ĐẶT</h2>
            
            <div class="settings-option">
                <h3><i class="fas fa-palette"></i> Giao Diện</h3>
                
                <div class="setting-item">
                    <div class="setting-info">
                        <h4>Chế độ tối/sáng</h4>
                        <p>Chuyển đổi giữa chế độ tối và sáng</p>
                    </div>
                    <label class="toggle-switch">
                        <input type="checkbox" id="themeToggle" onchange="toggleTheme()">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
            
            <div class="settings-option">
                <h3><i class="fas fa-info-circle"></i> Thông Tin</h3>
                
                <div class="setting-item">
                    <div class="setting-info">
                        <h4>Tổng số mods</h4>
                        <p id="settingsTotalMods">0</p>
                    </div>
                </div>
                
                <div class="setting-item">
                    <div class="setting-info">
                        <h4>Tổng lượt tải</h4>
                        <p id="settingsTotalDownloads">0</p>
                    </div>
                </div>
                
                <div class="setting-item">
                    <div class="setting-info">
                        <h4>Phiên bản</h4>
                        <p>ETS2 Mods v1.0</p>
                    </div>
                </div>
            </div>
            
            <div class="settings-option">
                <h3><i class="fas fa-database"></i> Dữ Liệu</h3>
                <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 15px;">
                    <i class="fas fa-info-circle"></i> Dữ liệu được lưu trữ trong file JSON riêng trên hosting. 
                    Để xóa mod, vui lòng xóa trực tiếp trong file JSON tương ứng.
                </p>
                
                <div class="setting-item">
                    <div class="setting-info">
                        <h4>File JSON</h4>
                        <p>Mỗi danh mục có file JSON riêng</p>
                    </div>
                </div>
            </div>
            
            <div class="modal-buttons">
                <button class="modal-btn cancel" onclick="closeSettingsModal()">
                    <i class="fas fa-times"></i> Đóng
                </button>
            </div>
        </div>
    </div>

    <!-- Game Download Modal -->
    <div class="modal" id="gameDownloadModal">
        <div class="download-content">
            <button class="close-modal" onclick="closeGameDownloadModal()">&times;</button>
            <h2 class="download-title"><i class="fas fa-gamepad"></i> LINK TẢI GAME</h2>
            
            <div style="background: rgba(88, 166, 255, 0.1); padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid var(--accent-primary);">
                <h3 style="color: var(--accent-primary); margin-bottom: 10px;">Thông tin phiên bản:</h3>
                <ul style="color: var(--text-secondary); padding-left: 20px;">
                    <li>Euro Truck Simulator 2 v1.47</li>
                    <li>Kích thước: ~15 GB</li>
                    <li>Hệ điều hành: Windows 7/8/10/11, Linux, macOS</li>
                    <li>Cấu hình đề nghị: Intel Core i5, 8GB RAM, GTX 760</li>
                </ul>
            </div>
            
            <div class="download-link-container">
                <input type="text" class="download-link" id="gameDownloadLink" readonly value="https://store.steampowered.com/app/227300/Euro_Truck_Simulator_2/">
                <button class="copy-btn" onclick="copyGameLink()">
                    <i class="fas fa-copy"></i> COPY
                </button>
            </div>
            
            <p style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 15px;">
                <i class="fas fa-info-circle"></i> Nhấn COPY để sao chép link tải game từ Steam.
            </p>
            
            <div class="modal-buttons">
                <button class="modal-btn cancel" onclick="closeGameDownloadModal()">
                    <i class="fas fa-times"></i> Đóng
                </button>
                <button class="modal-btn submit" onclick="directGameDownload()">
                    <i class="fas fa-external-link-alt"></i> Mở Steam
                </button>
            </div>
        </div>
    </div>

    <!-- Download Modal -->
    <div class="modal" id="downloadModal">
        <div class="download-content">
            <button class="close-modal" onclick="closeDownloadModal()">&times;</button>
            <h2 class="download-title"><i class="fas fa-download"></i> TẢI XUỐNG MOD</h2>
            <p id="modalModName" style="color: var(--text-tertiary); margin-bottom: 20px;">Mod Name</p>
            
            <div class="download-link-container">
                <input type="text" class="download-link" id="downloadLink" readonly>
                <button class="copy-btn" onclick="copyDownloadLink()">
                    <i class="fas fa-copy"></i> COPY
                </button>
            </div>
            
            <div style="background: rgba(88, 166, 255, 0.1); padding: 15px; border-radius: 8px; margin: 20px 0; border-left: 4px solid var(--accent-primary);">
                <p style="color: var(--text-secondary); font-size: 0.9rem;">
                    <i class="fas fa-info-circle"></i> Sau khi tải về, giải nén và copy file .scs vào thư mục "mods" của game
                </p>
            </div>
            
            <div class="modal-buttons">
                <button class="modal-btn cancel" onclick="closeDownloadModal()">
                    <i class="fas fa-times"></i> Đóng
                </button>
                <button class="modal-btn submit" onclick="directDownload()">
                    <i class="fas fa-external-link-alt"></i> Mở Link Tải
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle" id="toastIcon"></i>
        <span id="toastMessage">Thành công!</span>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3><img src="https://img.icons8.com/color/48/000000/truck.png" style="width: 30px; height: 30px; vertical-align: middle; margin-right: 10px;">ETS2Mods</h3>
                    <p style="color: var(--text-secondary); margin-top: 15px;">
                        Nền tảng chia sẻ mods Euro Truck Simulator 2. 
                        Dữ liệu được lưu trong file JSON riêng trên hosting.
                    </p>
                </div>
                
                <div class="footer-section">
                    <h3><i class="fas fa-chart-bar"></i> Thống Kê</h3>
                    <div style="color: var(--text-secondary); margin-top: 15px;">
                        <p><i class="fas fa-box"></i> Tổng mods: <span id="footerTotalMods">0</span></p>
                        <p><i class="fas fa-download"></i> Tổng lượt tải: <span id="footerTotalDownloads">0</span></p>
                        <p><i class="fas fa-code-branch"></i> Phiên bản: v1.0</p>
                    </div>
                </div>
            </div>
            
            <div class="copyright">
                <p>© 2024 ETS2Mods. Euro Truck Simulator 2 là sản phẩm của SCS Software.</p>
                <p style="margin-top: 10px; font-size: 0.8rem;">
                    <i class="fas fa-info-circle"></i> Để xóa mod, vui lòng xóa trực tiếp trong file JSON trên hosting.
                </p>
            </div>
        </div>
    </footer>

    <script>
        // Danh sách file JSON cho từng danh mục
        const jsonFiles = {
            'trucks': 'trucks.json',
            'trailers': 'trailers.json',
            'maps': 'maps.json',
            'graphics': 'graphics.json',
            'physics': 'physics.json',
            'sounds': 'sounds.json',
            'seasons': 'seasons.json',
            'game_download': 'game_download.json',
            'others': 'others.json'
        };

        const categories = {
            'trucks': { name: 'Xe Tải', icon: 'truck' },
            'trailers': { name: 'Trailer', icon: 'trailer' },
            'maps': { name: 'Bản Đồ', icon: 'map' },
            'graphics': { name: 'Đồ Họa', icon: 'palette' },
            'physics': { name: 'Vật Lý', icon: 'cogs' },
            'sounds': { name: 'Âm Thanh', icon: 'volume-up' },
            'seasons': { name: 'Mùa', icon: 'snowflake' },
            'game_download': { name: 'Tải Game', icon: 'download' },
            'others': { name: 'Khác', icon: 'cube' }
        };

        // Slider data
        const sliderData = [
            {
                image: "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80",
                title: "Scania R Series 2023",
                description: "Mod xe tải Scania mới nhất với đồ họa 4K và nội thất chi tiết"
            },
            {
                image: "https://images.unsplash.com/photo-1542744095-fcf48d80b0fd?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80",
                title: "Promods Map Expansion",
                description: "Bản đồ mở rộng châu Âu với hàng trăm thành phố mới"
            },
            {
                image: "https://images.unsplash.com/photo-1518709268805-4e9042af2176?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80",
                title: "Realistic Weather Mod",
                description: "Thời tiết thực tế với hiệu ứng ánh sáng đẹp mắt"
            }
        ];

        let currentFilter = 'all';
        let searchQuery = '';
        let allMods = [];
        let currentMod = null;

        // Helper functions
        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        function formatNumber(num) {
            if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
            if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
            return num.toString();
        }

        // Theme functions
        function toggleTheme() {
            const body = document.body;
            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = document.querySelector('.theme-toggle i');
            
            if (body.classList.contains('theme-light')) {
                body.classList.remove('theme-light');
                themeIcon.className = 'fas fa-moon';
                if (themeToggle) themeToggle.checked = false;
                localStorage.setItem('ets2mods_theme', 'dark');
                showToast('Đã chuyển sang chế độ tối');
            } else {
                body.classList.add('theme-light');
                themeIcon.className = 'fas fa-sun';
                if (themeToggle) themeToggle.checked = true;
                localStorage.setItem('ets2mods_theme', 'light');
                showToast('Đã chuyển sang chế độ sáng');
            }
        }

        function loadTheme() {
            const savedTheme = localStorage.getItem('ets2mods_theme') || 'dark';
            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = document.querySelector('.theme-toggle i');
            
            if (savedTheme === 'light') {
                document.body.classList.add('theme-light');
                if (themeToggle) themeToggle.checked = true;
                if (themeIcon) themeIcon.className = 'fas fa-sun';
            } else {
                document.body.classList.remove('theme-light');
                if (themeToggle) themeToggle.checked = false;
                if (themeIcon) themeIcon.className = 'fas fa-moon';
            }
        }

        // Load mods from JSON files
        async function loadMods() {
            allMods = [];
            
            // Try to load from JSON files first
            for (const [category, filename] of Object.entries(jsonFiles)) {
                try {
                    const response = await fetch(filename);
                    if (response.ok) {
                        const data = await response.json();
                        if (Array.isArray(data)) {
                            data.forEach(mod => {
                                mod.category = category;
                                allMods.push(mod);
                            });
                        }
                    }
                } catch (error) {
                    console.log(`Không thể tải file ${filename}:`, error);
                }
            }
            
            // If no JSON files found, use localStorage as backup
            if (allMods.length === 0) {
                loadFromLocalStorage();
            }
            
            updateStats();
            displayMods();
        }

        function loadFromLocalStorage() {
            allMods = [];
            Object.keys(categories).forEach(category => {
                const data = localStorage.getItem(`ets2_mods_${category}`);
                if (data) {
                    try {
                        const mods = JSON.parse(data);
                        if (Array.isArray(mods)) {
                            mods.forEach(mod => {
                                mod.category = category;
                                allMods.push(mod);
                            });
                        }
                    } catch (e) {
                        console.error('Error parsing localStorage data:', e);
                    }
                }
            });
            
            // If still empty, create sample data
            if (allMods.length === 0) {
                createSampleData();
            }
        }

        function createSampleData() {
            const sampleMods = [
                {
                    id: generateId(),
                    name: "Scania R Series 2023",
                    category: "trucks",
                    description: "Scania R Series phiên bản 2023 với nội thất chi tiết, ánh sáng thực tế và nhiều tùy chọn.",
                    image: "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                    download: "https://drive.google.com/uc?export=download&id=1ABC123XYZ",
                    size: "45.2 MB",
                    version: "1.47",
                    author: "ETS2Mods Team",
                    downloads: 12500,
                    createdAt: new Date().toISOString()
                },
                {
                    id: generateId(),
                    name: "Promods Map 2.65",
                    category: "maps",
                    description: "Bản đồ mở rộng châu Âu với chi tiết cao, thêm nhiều thành phố và đường mới.",
                    image: "https://images.unsplash.com/photo-1542744095-fcf48d80b0fd?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                    download: "https://drive.google.com/uc?export=download&id=2DEF456UVW",
                    size: "2.1 GB",
                    version: "1.47",
                    author: "Promods Team",
                    downloads: 89300,
                    createdAt: new Date().toISOString()
                },
                {
                    id: generateId(),
                    name: "Realistic Graphics Mod",
                    category: "graphics",
                    description: "Cải thiện đồ họa, thời tiết, ánh sáng và hiệu ứng hình ảnh cho trải nghiệm thực tế hơn.",
                    image: "https://images.unsplash.com/photo-1518709268805-4e9042af2176?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                    download: "https://drive.google.com/uc?export=download&id=3GHI789RST",
                    size: "320 MB",
                    version: "1.46+",
                    author: "Graphics Team",
                    downloads: 67800,
                    createdAt: new Date().toISOString()
                },
                {
                    id: generateId(),
                    name: "Euro Truck Simulator 2",
                    category: "game_download",
                    description: "Phiên bản đầy đủ của game Euro Truck Simulator 2 với tất cả DLC.",
                    image: "https://images.unsplash.com/photo-1560958089-b8a1929cea89?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                    download: "https://store.steampowered.com/app/227300/Euro_Truck_Simulator_2/",
                    size: "15 GB",
                    version: "1.47",
                    author: "SCS Software",
                    downloads: 0,
                    createdAt: new Date().toISOString()
                }
            ];
            
            sampleMods.forEach(mod => {
                allMods.push(mod);
                // Also save to localStorage for backup
                saveToLocalStorage(mod.category, mod);
            });
            
            updateStats();
        }

        function saveToLocalStorage(category, mod) {
            const key = `ets2_mods_${category}`;
            const existingData = localStorage.getItem(key);
            let mods = [];
            
            if (existingData) {
                try {
                    mods = JSON.parse(existingData);
                } catch (e) {
                    mods = [];
                }
            }
            
            // Check if mod already exists
            const existingIndex = mods.findIndex(m => m.id === mod.id);
            if (existingIndex === -1) {
                mods.push(mod);
            } else {
                mods[existingIndex] = mod;
            }
            
            localStorage.setItem(key, JSON.stringify(mods));
        }

        function getFilteredMods() {
            let mods = allMods.filter(mod => mod.category !== 'game_download');
            
            // Apply search filter
            if (searchQuery) {
                const query = searchQuery.toLowerCase();
                mods = mods.filter(mod => 
                    mod.name.toLowerCase().includes(query) || 
                    mod.description.toLowerCase().includes(query) ||
                    (mod.author && mod.author.toLowerCase().includes(query))
                );
            }
            
            // Apply category filter
            if (currentFilter !== 'all') {
                mods = mods.filter(mod => mod.category === currentFilter);
            }
            
            return mods;
        }

        function updateStats() {
            const totalMods = allMods.filter(mod => mod.category !== 'game_download').length;
            let totalDownloads = 0;
            
            allMods.forEach(mod => {
                totalDownloads += mod.downloads || 0;
            });
            
            const trucksCount = allMods.filter(mod => mod.category === 'trucks').length;
            const mapsCount = allMods.filter(mod => mod.category === 'maps').length;
            
            // Update quick stats
            document.getElementById('totalModsCount').textContent = totalMods;
            document.getElementById('totalDownloadsCount').textContent = formatNumber(totalDownloads);
            document.getElementById('trucksCount').textContent = trucksCount;
            document.getElementById('mapsCount').textContent = mapsCount;
            
            // Update footer
            document.getElementById('footerTotalMods').textContent = totalMods;
            document.getElementById('footerTotalDownloads').textContent = formatNumber(totalDownloads);
            
            // Update settings
            document.getElementById('settingsTotalMods').textContent = totalMods;
            document.getElementById('settingsTotalDownloads').textContent = formatNumber(totalDownloads);
        }

        // Initialize sidebar categories
        function initCategories() {
            const categoryList = document.getElementById('categoryList');
            
            // Add "All" category
            const allCategory = document.createElement('div');
            allCategory.className = 'category-item active';
            allCategory.innerHTML = `<i class="fas fa-layer-group"></i> Tất Cả`;
            allCategory.onclick = () => filterCategory('all');
            categoryList.appendChild(allCategory);
            
            // Add other categories
            Object.entries(categories).forEach(([key, category]) => {
                if (key !== 'game_download') {
                    const categoryItem = document.createElement('div');
                    categoryItem.className = 'category-item';
                    categoryItem.innerHTML = `<i class="fas fa-${category.icon}"></i> ${category.name}`;
                    categoryItem.onclick = () => filterCategory(key);
                    categoryList.appendChild(categoryItem);
                }
            });
        }

        function filterCategory(category) {
            // Update active category
            document.querySelectorAll('.category-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
            
            currentFilter = category;
            displayMods();
        }

        // Slider functions
        let currentSlide = 0;
        let slideInterval;

        function initSlider() {
            const sliderContainer = document.getElementById('sliderContainer');
            const dotsContainer = document.getElementById('sliderDots');
            
            sliderData.forEach((slide, index) => {
                const slideDiv = document.createElement('div');
                slideDiv.className = 'slide';
                slideDiv.innerHTML = `
                    <img src="${slide.image}" alt="${slide.title}">
                    <div class="slide-content">
                        <h2>${slide.title}</h2>
                        <p>${slide.description}</p>
                    </div>
                `;
                sliderContainer.appendChild(slideDiv);
                
                const dot = document.createElement('div');
                dot.className = `dot ${index === 0 ? 'active' : ''}`;
                dot.onclick = () => goToSlide(index);
                dotsContainer.appendChild(dot);
            });
            
            startAutoSlide();
        }

        function startAutoSlide() {
            slideInterval = setInterval(nextSlide, 5000);
        }

        function nextSlide() {
            const slides = document.querySelectorAll('.slide');
            currentSlide = (currentSlide + 1) % slides.length;
            updateSlider();
        }

        function prevSlide() {
            const slides = document.querySelectorAll('.slide');
            currentSlide = (currentSlide - 1 + slides.length) % slides.length;
            updateSlider();
        }

        function goToSlide(index) {
            currentSlide = index;
            updateSlider();
            resetAutoSlide();
        }

        function updateSlider() {
            const sliderContainer = document.getElementById('sliderContainer');
            const dots = document.querySelectorAll('.dot');
            
            sliderContainer.style.transform = `translateX(-${currentSlide * 100}%)`;
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentSlide);
            });
        }

        function resetAutoSlide() {
            clearInterval(slideInterval);
            startAutoSlide();
        }

        // Mod card functions
        function createModCard(mod) {
            const categoryInfo = categories[mod.category] || { name: mod.category, icon: 'cube' };
            
            return `
                <div class="mod-card" data-category="${mod.category}">
                    <div class="mod-image">
                        <img src="${mod.image}" alt="${mod.name}" onerror="this.src='https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80'">
                        <div class="mod-category">${categoryInfo.name}</div>
                    </div>
                    <div class="mod-info">
                        <h3 class="mod-title">
                            <i class="fas fa-${categoryInfo.icon}"></i>
                            ${mod.name}
                        </h3>
                        <div class="mod-description">${mod.description}</div>
                        <div class="mod-meta">
                            <span><i class="fas fa-download"></i> ${formatNumber(mod.downloads || 0)}</span>
                            <span><i class="fas fa-hdd"></i> ${mod.size || 'N/A'}</span>
                            <span><i class="fas fa-tag"></i> ${mod.version || '1.47'}</span>
                        </div>
                        <div class="mod-actions">
                            <button class="mod-btn download" onclick="openDownloadModal('${mod.id}', '${mod.category}')">
                                <i class="fas fa-download"></i> Tải Mod
                            </button>
                        </div>
                        ${mod.author ? `<p style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 10px;"><i class="fas fa-user"></i> ${mod.author}</p>` : ''}
                    </div>
                </div>
            `;
        }

        function displayMods() {
            const modsContainer = document.getElementById('modsContainer');
            const gameDownloadSection = document.getElementById('gameDownloadSection');
            
            // Show/hide game download section
            if (currentFilter === 'all') {
                gameDownloadSection.style.display = 'block';
            } else {
                gameDownloadSection.style.display = 'none';
            }
            
            const mods = getFilteredMods();
            
            // Update count badge
            document.getElementById('displayCount').textContent = `${mods.length} mods`;
            
            if (mods.length > 0) {
                // Sort by downloads (popular first)
                mods.sort((a, b) => (b.downloads || 0) - (a.downloads || 0));
                modsContainer.innerHTML = mods.map(mod => createModCard(mod)).join('');
            } else {
                modsContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-box-open"></i>
                        <h3>Không tìm thấy mod nào</h3>
                        <p>${searchQuery ? `Không có kết quả cho "${searchQuery}"` : 'Hãy thêm mod đầu tiên của bạn!'}</p>
                        <button onclick="openAddModal()" class="modal-btn submit">
                            <i class="fas fa-plus"></i> Thêm Mod Mới
                        </button>
                    </div>
                `;
            }
        }

        function searchMods() {
            searchQuery = document.getElementById('searchInput').value.trim();
            displayMods();
        }

        // Modal functions
        function openAddModal() {
            document.getElementById('addModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeAddModal() {
            document.getElementById('addModal').style.display = 'none';
            document.body.style.overflow = 'auto';
            document.getElementById('addModForm').reset();
        }

        function showSettingsModal() {
            document.getElementById('settingsModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeSettingsModal() {
            document.getElementById('settingsModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function openGameDownloadModal() {
            document.getElementById('gameDownloadModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeGameDownloadModal() {
            document.getElementById('gameDownloadModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function openDownloadModal(modId, category) {
            const mod = allMods.find(m => m.id === modId && m.category === category);
            
            if (!mod) {
                showToast('Không tìm thấy mod!', true);
                return;
            }
            
            currentMod = mod;
            document.getElementById('modalModName').textContent = currentMod.name;
            document.getElementById('downloadLink').value = currentMod.download;
            document.getElementById('downloadModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeDownloadModal() {
            document.getElementById('downloadModal').style.display = 'none';
            document.body.style.overflow = 'auto';
            currentMod = null;
        }

        // Game download functions
        function downloadGame() {
            window.open('https://store.steampowered.com/app/227300/Euro_Truck_Simulator_2/', '_blank');
            showToast('Đang mở trang Steam...');
        }

        function copyGameLink() {
            const linkInput = document.getElementById('gameDownloadLink');
            linkInput.select();
            
            navigator.clipboard.writeText(linkInput.value)
                .then(() => {
                    showToast('Đã sao chép link tải game!');
                })
                .catch(() => {
                    showToast('Sao chép thất bại!', true);
                });
        }

        function directGameDownload() {
            window.open('https://store.steampowered.com/app/227300/Euro_Truck_Simulator_2/', '_blank');
            showToast('Đang mở Steam...');
        }

        // Mod functions
        async function addMod(event) {
            event.preventDefault();
            
            const modData = {
                id: generateId(),
                name: document.getElementById('modName').value.trim(),
                category: document.getElementById('modCategory').value,
                description: document.getElementById('modDescription').value.trim(),
                image: document.getElementById('modImage').value.trim(),
                download: document.getElementById('modDownload').value.trim(),
                size: document.getElementById('modSize').value.trim(),
                version: document.getElementById('modVersion').value.trim(),
                author: document.getElementById('modAuthor').value.trim(),
                downloads: parseInt(document.getElementById('modDownloads').value) || 0,
                createdAt: new Date().toISOString()
            };
            
            // Validation
            if (!modData.name || !modData.category || !modData.description || !modData.image || !modData.download) {
                showToast('Vui lòng điền đầy đủ các trường bắt buộc!', true);
                return;
            }
            
            try {
                new URL(modData.image);
                new URL(modData.download);
            } catch (e) {
                showToast('Link ảnh hoặc link tải không hợp lệ!', true);
                return;
            }
            
            // Add to memory and localStorage
            allMods.push(modData);
            saveToLocalStorage(modData.category, modData);
            
            // Save to JSON file on server
            await saveToServer(modData.category, modData);
            
            displayMods();
            updateStats();
            showToast(`Đã thêm mod "${modData.name}" thành công!`);
            closeAddModal();
        }

        async function saveToServer(category, newMod) {
            try {
                // First, get existing mods from the server
                const filename = jsonFiles[category];
                let existingMods = [];
                
                try {
                    const response = await fetch(filename);
                    if (response.ok) {
                        const data = await response.json();
                        if (Array.isArray(data)) {
                            existingMods = data;
                        }
                    }
                } catch (error) {
                    console.log(`Không thể tải file ${filename}, tạo file mới`);
                }
                
                // Check if mod already exists
                const existingIndex = existingMods.findIndex(m => m.id === newMod.id);
                if (existingIndex === -1) {
                    existingMods.push(newMod);
                } else {
                    existingMods[existingIndex] = newMod;
                }
                
                // In a real application, you would send this to your server
                // For now, we'll just log it
                console.log(`Cần lưu vào file ${filename}:`, existingMods);
                showToast('Mod đã được lưu cục bộ. Cần upload lên server.');
                
            } catch (error) {
                console.error('Error saving to server:', error);
                showToast('Lỗi khi lưu lên server, đã lưu cục bộ', true);
            }
        }

        function copyDownloadLink() {
            const linkInput = document.getElementById('downloadLink');
            linkInput.select();
            
            navigator.clipboard.writeText(linkInput.value)
                .then(() => {
                    showToast('Đã sao chép link tải!');
                    
                    // Increase download count
                    if (currentMod) {
                        currentMod.downloads = (currentMod.downloads || 0) + 1;
                        saveToLocalStorage(currentMod.category, currentMod);
                        updateStats();
                        displayMods();
                    }
                })
                .catch(() => {
                    showToast('Sao chép thất bại!', true);
                });
        }

        function directDownload() {
            if (currentMod && currentMod.download) {
                window.open(currentMod.download, '_blank');
                showToast('Đang mở link tải...');
            }
        }

        // Toast notification
        function showToast(message, isError = false) {
            const toast = document.getElementById('toast');
            const toastIcon = document.getElementById('toastIcon');
            const toastMessage = document.getElementById('toastMessage');
            
            toastMessage.textContent = message;
            toastIcon.className = isError ? 'fas fa-exclamation-circle' : 'fas fa-check-circle';
            toast.className = `toast ${isError ? 'error' : ''} show`;
            
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            loadTheme();
            initSlider();
            initCategories();
            loadMods();
            
            // Event listeners
            document.getElementById('addModForm').addEventListener('submit', addMod);
            
            // Search on Enter key
            document.getElementById('searchInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') searchMods();
            });
            
            // Close modals
            const modals = ['addModal', 'settingsModal', 'downloadModal', 'gameDownloadModal'];
            modals.forEach(modalId => {
                document.getElementById(modalId).addEventListener('click', function(e) {
                    if (e.target === this) {
                        if (modalId === 'addModal') closeAddModal();
                        if (modalId === 'settingsModal') closeSettingsModal();
                        if (modalId === 'downloadModal') closeDownloadModal();
                        if (modalId === 'gameDownloadModal') closeGameDownloadModal();
                    }
                });
            });
            
            // ESC key to close modals
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeAddModal();
                    closeSettingsModal();
                    closeDownloadModal();
                    closeGameDownloadModal();
                }
            });
            
            // Initialize theme toggle state
            const themeToggle = document.getElementById('themeToggle');
            if (themeToggle) {
                themeToggle.checked = document.body.classList.contains('theme-light');
            }
        });
    </script>
</body>
</html>
